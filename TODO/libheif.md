
# LIBHEIF

https://github.com/strukturag/libheif

Requires:
- LIBDE265
- X265
- AOM
- RAV1E (not needed if using AOM's AVIF?)
- DAV1D (not needed if using AOM's AVIF?)
- JPEG



#### LIBDE265

https://github.com/strukturag/libde265

Version 1.0.8.

libde265 has no dependencies on other libraries, but example programs have dependencies.
Building of the example programs can be disabled by running ./configure with:
```
--disable-dec265        Do not build the dec265 decoder program.
--disable-sherlock265   Do not build the sherlock265 visual inspection program.
```
It seems like these options can't be set using CMake.
However, if the dependencies are not met, the build for these programs will be cancelled.


Building seems ok, but at install, the follwing error appears:
```
CMake Error at libde265/cmake_install.cmake:60 (file):
  file INSTALL cannot find
  ".../libde265/de265-version.h":
  File exists.
Call Stack (most recent call first):
  cmake_install.cmake:37 (include)
```
The file "libde265\de265-version.h" hasn't been generated by the configure.
(TODO: find+fix problem!)
The file should have been generated, and the version numbers inside it set to the current project version numbers.
This can be done manually by renaming the file "libde265\de265-version.h.in" to "libde265\de265-version.h", and manually replacing the following variables by their expected values:
```
@NUMERIC_VERSION@
@PACKAGE_VERSION@
```
The values can be found in the makefile ("CMakeLists.txt"):
```
project (libde265
    LANGUAGES C CXX
    VERSION 1.0.8
)

...

# The version number.
set (NUMERIC_VERSION 0x01000800)
set (PACKAGE_VERSION ${PROJECT_VERSION})
```
Where the "PACKAGE_VERSION" is the project's version defined above: "1.0.8".


The resulting values in the header file are thus:
```
/* Numeric representation of the version */
#define LIBDE265_NUMERIC_VERSION 0x01000800

/* Version string */
#define LIBDE265_VERSION "1.0.8"
```


#### X265

https://bitbucket.org/multicoreware/x265_git/wiki/Home
or
http://hg.videolan.org/x265/

Version 3.5.


Uses NASM executable.


#### AOM


https://aomedia.googlesource.com/aom/
Version 3.1.2.


https://aomedia.googlesource.com/aom/+/refs/tags/v3.1.2


Requirements:
- Git (why?)
x- NASM executable (?)
- PERL executable
  (can use the ZIP version
    https://strawberryperl.com/releases.html
    https://strawberryperl.com/download/5.32.1.1/strawberry-perl-5.32.1.1-64bit.zip
  )
- Python can be disabled (used for tests)

(TODO: find way to build only libraries, no applications)

Generated libraries and executables in "Release" or "Debug" directory.
(TODO: includes? - CHECK REQUIRED!)


#### RAV1E

"The fastest and safest AV1 encoder."
https://github.com/xiph/rav1e

Skipped for now...
(might not be needed if using AOM AVIF codec?)
(TODO: add config variable to skip search?)

(TODO: build...)
Requires Rust toolchain for build.
(TODO: use this?
https://github.com/rust-lang/rustup
)


#### DAV1D

"dav1d is the fastest AV1 decoder on all platforms."
https://code.videolan.org/videolan/dav1d

Skipped for now...
(might not be needed if using AOM AVIF codec?)
(TODO: add config variable to skip search?)

(TODO: build...)
Requires:
- Meson (https://mesonbuild.com/)
- Ninja (https://ninja-build.org/)


#### JPEG

(as previously)

